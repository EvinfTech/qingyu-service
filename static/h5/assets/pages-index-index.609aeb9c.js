import{d as e,m as t,a,r as i,o as s,c as o,w as l,b as r,e as n,F as c,f as d,n as u,g as h,t as b,i as p,h as m,j as g,k as v,l as f,p as y,q as x,s as _,u as I,v as S,x as C,y as H,S as k,z as w}from"./index-0cdf8aad.js";import{r as P,_ as $}from"./uni-app.es.b79b333a.js";import{_ as j}from"./u-badge.d27bb57c.js";import{_ as A}from"./_plugin-vue_export-helper.1b428a4d.js";import{_ as D}from"./u-safe-bottom.196165c8.js";import B from"./pages-home-home.078d3c12.js";import N from"./pages-mine-mine.7e6e0e6c.js";import"./request.4f472fa9.js";import"./util.4f6eae7a.js";const V=A({name:"u-tabbar-item",mixins:[t,a,{props:{name:{type:[String,Number,null],default:e.tabbarItem.name},icon:{icon:String,default:e.tabbarItem.icon},badge:{type:[String,Number,null],default:e.tabbarItem.badge},dot:{type:Boolean,default:e.tabbarItem.dot},text:{type:String,default:e.tabbarItem.text},badgeStyle:{type:[Object,String],default:e.tabbarItem.badgeStyle}}}],data:()=>({isActive:!1,parentData:{value:null,activeColor:"",inactiveColor:""}}),options:{virtualHost:!0},created(){this.init()},emits:["click","change"],methods:{init(){this.updateParentData(),this.parent||uni.$u.error("u-tabbar-item必须搭配u-tabbar组件使用");const e=this.parent.children.indexOf(this);this.isActive=(this.name||e)===this.parentData.value},updateParentData(){this.getParentData("u-tabbar")},updateFromParent(){this.init()},clickHandler(){this.$nextTick((()=>{const e=this.parent.children.indexOf(this),t=this.name||e;t!==this.parent.value&&this.parent.$emit("change",t),this.$emit("click",t)}))}}},[["render",function(e,t,a,g,v,f){const y=P(i("u-icon"),$),x=P(i("u-badge"),j),_=p,I=m;return s(),o(_,{class:"u-tabbar-item",style:u([e.$u.addStyle(e.customStyle)]),onClick:f.clickHandler},{default:l((()=>[r(_,{class:"u-tabbar-item__icon"},{default:l((()=>[e.icon?(s(),o(y,{key:0,name:e.icon,color:v.isActive?v.parentData.activeColor:v.parentData.inactiveColor,size:20},null,8,["name","color"])):(s(),n(c,{key:1},[v.isActive?d(e.$slots,"active-icon",{key:0},void 0,!0):d(e.$slots,"inactive-icon",{key:1},void 0,!0)],64)),r(x,{absolute:"",offset:[0,e.dot?"34rpx":e.badge>9?"14rpx":"20rpx"],customStyle:e.badgeStyle,isDot:e.dot,value:e.badge||(e.dot?1:null),show:e.dot||e.badge>0},null,8,["offset","customStyle","isDot","value","show"])])),_:3}),d(e.$slots,"text",{},(()=>[r(I,{class:"u-tabbar-item__text",style:u({color:v.isActive?v.parentData.activeColor:v.parentData.inactiveColor})},{default:l((()=>[h(b(e.text),1)])),_:1},8,["style"])]),!0)])),_:3},8,["style","onClick"])}],["__scopeId","data-v-79e7cb53"]]);const z=A({name:"u-tabbar",mixins:[t,a,{props:{value:{type:[String,Number,null],default:e.tabbar.value},safeAreaInsetBottom:{type:Boolean,default:e.tabbar.safeAreaInsetBottom},border:{type:Boolean,default:e.tabbar.border},zIndex:{type:[String,Number],default:e.tabbar.zIndex},activeColor:{type:String,default:e.tabbar.activeColor},inactiveColor:{type:String,default:e.tabbar.inactiveColor},fixed:{type:Boolean,default:e.tabbar.fixed},placeholder:{type:Boolean,default:e.tabbar.placeholder}}}],data:()=>({placeholderHeight:0}),computed:{tabbarStyle(){const e={zIndex:this.zIndex};return uni.$u.deepMerge(e,uni.$u.addStyle(this.customStyle))},updateChild(){return[this.value,this.activeColor,this.inactiveColor]},updatePlaceholder(){return[this.fixed,this.placeholder]}},watch:{updateChild(){this.updateChildren()},updatePlaceholder(){this.setPlaceholderHeight()}},created(){this.children=[]},mounted(){this.setPlaceholderHeight()},methods:{updateChildren(){this.children.length&&this.children.map((e=>e.updateFromParent()))},async setPlaceholderHeight(){this.fixed&&this.placeholder&&(await uni.$u.sleep(20),this.$uGetRect(".u-tabbar__content").then((({height:e=50})=>{this.placeholderHeight=e})))}}},[["render",function(e,t,a,n,c,h){const b=p,m=P(i("u-safe-bottom"),D);return s(),o(b,{class:"u-tabbar"},{default:l((()=>[r(b,{class:g(["u-tabbar__content",[e.border&&"u-border-top",e.fixed&&"u-tabbar--fixed"]]),ref:"u-tabbar__content",onTouchmove:v(e.noop,["stop","prevent"]),style:u([h.tabbarStyle])},{default:l((()=>[r(b,{class:"u-tabbar__content__item-wrapper"},{default:l((()=>[d(e.$slots,"default",{},void 0,!0)])),_:3}),e.safeAreaInsetBottom?(s(),o(m,{key:0})):f("",!0)])),_:3},8,["onTouchmove","class","style"]),e.placeholder?(s(),o(b,{key:0,class:"u-tabbar__placeholder",style:u({height:c.placeholderHeight+"px"})},null,8,["style"])):f("",!0)])),_:3})}],["__scopeId","data-v-b564ac71"]]);const L=A({components:{Home:B,Mine:N},data:()=>({app:y(),active:0,scrollViewHeight:0,tabbarList:[{text:"首页",iconPath:"/static/images/index/home.svg",selectedIconPath:"/static/images/index/homeActive.svg"},{text:"我的",iconPath:"/static/images/index/mine.svg",selectedIconPath:"/static/images/index/mineActive.svg"}],gymnasiumInfo:{}}),onLoad(){this.getTabbarIndex(),this.calculatePageHeight(),this.checkLoginState()},onShow(){},onReady(){},methods:{getTabbarIndex(){let e=x("tabbarIndex");e&&(this.active=Number(e))},navigate(e){this.active=e.detail},calculatePageHeight(){var e=_().windowHeight;let t=_().safeArea.bottom;this.scrollViewHeight=e-50-(e-t),this.scrollViewHeight=e-60-(e-t)},checkLoginState(){x("userInfo")||I({url:"/pages/login/login"})},tabbarChange(e){this.active=e,S("tabbarIndex",e)}}},[["render",function(e,t,a,d,h,b){const m=H("Home"),g=H("Mine"),v=k,f=w,y=P(i("u-tabbar-item"),V),x=P(i("u-tabbar"),z),_=p;return s(),o(_,{class:"page"},{default:l((()=>[r(v,{class:"content","scroll-y":!0,style:u("height: "+h.scrollViewHeight+"px;")},{default:l((()=>[0==h.active?(s(),o(m,{key:0,scrollViewHeight:h.scrollViewHeight,onNavigate:b.navigate},null,8,["scrollViewHeight","onNavigate"])):(s(),o(g,{key:1,ref:"mine",id:"mine"},null,512))])),_:1},8,["style"]),r(x,{value:h.active,onChange:b.tabbarChange,border:!0,fixed:!1,placeholder:!1},{default:l((()=>[(s(!0),n(c,null,C(h.tabbarList,((e,t)=>(s(),o(y,{text:e.text,key:t},{"active-icon":l((()=>[r(f,{class:"u-page__item__slot-icon",src:e.selectedIconPath,style:{width:"48rpx",height:"60rpx"}},null,8,["src"])])),"inactive-icon":l((()=>[r(f,{class:"u-page__item__slot-icon",src:e.iconPath,style:{width:"48rpx",height:"60rpx"}},null,8,["src"])])),_:2},1032,["text"])))),128))])),_:1},8,["value","onChange"])])),_:1})}],["__scopeId","data-v-15809797"]]);export{L as default};
